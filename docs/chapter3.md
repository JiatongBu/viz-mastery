##  第三章：不同数据类型的可视化


### 3.1 时序数据可视化

对于时序数据而言，







#### R语言实现
要在 R 中处理时间序列，首先需要将其置于时间序列对象中。这是一种 R 的结构，包含观察值及其对应的日期信息。一旦将数据放入时间序列对象中，就可以使用众多函数来操作、建模和绘制这些数据。

R 提供了多种用于存储时间序列的结构（详见侧栏“R 中的时间序列对象”）。在本章中，我们将使用由 xts 包提供的 xts 类。它支持规则和非规则间隔的时间序列，并提供了许多操作时间序列数据的函数。
R 中的时间序列对象

R 提供了许多用于存储时间序列数据的对象，很容易让人感到困惑。基础 R 包含了 ts 对象，用于存储具有规则时间间隔的单一时间序列，以及 mts 对象，用于存储具有规则时间间隔的多时间序列。

zoo 包提供了一个类，可以存储具有不规则时间间隔的时间序列，而 xts 包在 zoo 类的基础上扩展了更多支持函数。此外，还有一些常用的格式，如 tsibble、timeSeries、irts 和 tis。幸运的是，tsbox 包提供了将数据框转换为任意格式的函数，并能在不同的时间序列格式之间进行转换。

要创建一个 xts 时间序列，可以使用以下代码：

```r
library(xts)  
myseries <- xts(data, index)  
```



其中，data 是一个包含数值的向量，表示观测值；index 是一个日期向量，表示这些值的观测时间。以下示例展示了用法：数据是从 2018 年 1 月开始的两年的月度销售数据。


3.2 空间数据可视化
R与Python可以进行空间数据可视化的分析。

在Python中，工具如Pandas常用于通用数据分析，包括基本统计、数据透视表、模式匹配以及将数据导出为各种格式。而Geopandas进一步扩展了这些功能，专注于地理空间数据，支持地图绘制和基础的空间分析，例如空间连接和表格与地理特征的集成。

Python工具如Pandas可用于常规数据分析，涵盖基本统计、数据透视、模式匹配和数据格式转换。对于地理空间数据，Geopandas在Pandas基础上引入了空间数据结构，支持：

    地图绘制：如点、线、面等几何图形的可视化。
    空间分析：例如空间连接、缓冲区分析，以及表格数据与地理特征的结合。




在R方面，工具如dplyr和tidyr擅长数据表的重塑和子集选择。而在地理空间可视化领域，ggplot2和sf（Simple Features）尤为出色：

    高质量可视化：ggplot2以其美观、可高度定制的图表而闻名，并提供多种模板和配色方案。
    分层式图形语法：这种方法支持按步骤构建可视化图表，通过添加注释和统计变换层来丰富图表。
    与R Markdown的集成：能够无缝生成全面的报告和展示文档。

工具选择的考量

尽管这些R工具提供了精致的可视化能力，但它们主要面向R生态系统用户，更注重可视化而非空间数据操作。如果项目既需要初步数据可视化，又涉及后续的高级分析（如机器学习任务），在R与Python之间频繁切换可能会变得繁琐。

掌握Python中的地理空间可视化的理由

对于数据科学家，特别是处理大型独立项目的研究者来说，掌握R中的地理空间可视化可能显著优化工作流程。这可以在初步数据分析阶段创建复杂且视觉吸引力强的地图，而无需在不同编程环境间切换。当可视化不仅是一个前期步骤，而是在整个项目生命周期中持续需求时，这种技能尤为有用。

最终，在Python的Geopandas和R的ggplot2与sf之间的选择取决于项目的具体需求和用户对每种语言的熟悉程度。Python提供了直接且集成的工作方式，而R强大的可视化工具则无可匹敌。对于需要通过可视化讲述复杂地理空间数据故事的项目来说，它们是值得任何数据科学家掌握的宝贵工具。




